google.maps.__gjsload__('drawing_impl', function(_){var A2=function(a,b){function c(b,c,h,k){var f=_.W("div",a);_.kJ(f,"left");f.style.lineHeight="0";c={title:c,Ne:h,ug:k,padding:[4],Qf:!0};h=_.W("span");h.style.display="inline-block";var g=b||"hand",r=w2[g],t=_.gC(d,h,new _.H(0,r),x2);t.style.position="relative";var u=_.PK(f,h,b,c);_.M.addListener(u,"active_changed",function(){var a=u.get("active")?y2[g]:r;_.hC(t,x2,new _.H(0,a))});u.bindTo("value",e,"drawingMode")}var d=_.Rl("drawing"),e=this;c(null,"\u505c\u6b62\u7e6a\u88fd",!0,!b.length);_.D(b,
function(a,d){var e=z2[a];e&&c(a,e,!1,d==b.length-1)})},B2=_.l(),C2=function(a,b,c){this.l=a;this.m=b;this.A=c},D2=function(a){if(!a.b){var b={};_.zb(b,a.get("options"));null==b.zIndex&&(b.zIndex=a.A());delete b.map;a.b=a.l.f(b)}},E2=function(a,b){a.b&&(a.f?(a.b.get("map")||a.b.bindTo("map",a),a.l.b(a.b,a.f,b)):a.l.b(a.b,b))},F2=function(a,b){E2(a,b);b=a.b;b.unbind("map");a.b=null;_.M.trigger(a,"overlaycomplete",{type:a.l.l(),overlay:b});_.M.trigger(a,a.l.j(),b);a.f=null;a.j=!1},G2=_.l(),H2=function(a){this.f=
a;this.b=null},I2=function(a){if(!a.b){var b={};_.zb(b,a.get("options"));delete b.map;a.b=new _.Ge(b)}},J2=function(a,b,c,d){this.j=a;this.f=b;this.l=c;this.m=d+1E-6;this.b=null;this.D=new _.H(0,0);this.A=new _.H(0,0);this.B=new _.H(0,0)},K2=function(a,b){a.b.gc.getPath().push(b);a.b.Rb.set("anchors",[b])},N2=function(a,b){var c=L2(a,b);c?(a.j||2!=c.type||K2(a,c.latLng),M2(a)):K2(a,b)},L2=function(a,b){var c=a.b.gc.getPath(),d=c.getLength();if(d){var e=a.get("map"),f=e.get("projection");e=e.__gm.get("zoom");
e=a.m/(1<<e);var g=f.fromLatLngToPoint(b,a.D);b=b.lng();d=c.getAt(d-1);var h=new _.L(d.lat(),_.Bb(d.lng(),b-180,b+180),!0);h=f.fromLatLngToPoint(h,a.A);if(Math.abs(g.x-h.x)<=e&&Math.abs(g.y-h.y)<=e)return{type:1,latLng:d};c=c.getAt(0);b=new _.L(c.lat(),_.Bb(c.lng(),b-180,b+180),!0);a=f.fromLatLngToPoint(b,a.B);if(Math.abs(g.x-a.x)<=e&&Math.abs(g.y-a.y)<=e)return{type:2,latLng:c}}return null},P2=function(a){var b=a.get("options"),c=new _.N;c.setValues(b);var d=new _.TH(c,a.j);c={};_.zb(c,b);c.strokeColor=
d.get("strokeColor");c.strokeOpacity=d.get("strokeOpacity");c.strokeWeight=d.get("strokeWeight");null==c.zIndex&&(c.zIndex=a.l());delete c.path;delete c.map;var e=new _.tg(c);e.bindTo("map",a);c.strokeOpacity=d.get("ghostStrokeOpacity");d=new _.QH;d.setValues(c);d.set("anchors",[]);d.bindTo("map",a);var f=null;a.j&&(f={},_.zb(f,b),f.zIndex=c.zIndex,f.paths=new _.dd([e.getPath()]),delete f.map,f=new _.sg(f));a.b={gc:e,di:f,Rb:d};O2(a)},M2=function(a){var b=a.b.gc;b.unbind("map");var c=a.b.di;a.b.Rb.unbind("map");
a.b.Rb.set("map",null);a.b=null;a.set("draggableCursor",a.f);if(b.getPath().getLength()){if(a.j){b.set("map",null);c.set("map",a.get("map"));var d={type:"polygon",overlay:c};_.M.trigger(a,"overlaycomplete",d);_.M.trigger(a,"polygoncomplete",c)}else d={type:"polyline",overlay:b},_.M.trigger(a,"overlaycomplete",d),_.M.trigger(a,"polylinecomplete",b);O2(a)}else b.set("map",null)},O2=function(a){a.set("enablePanning",!!a.b&&a.get("drawPolysWithDrag")&&!a.get("panWhileDrawing"))},Q2=_.l(),R2=function(a,
b){if(a.lat()<b.lat()){var c=a.lat();var d=b.lat()}else c=b.lat(),d=a.lat();if(180>=_.sc(a.lng(),b.lng())){var e=a.lng();a=b.lng()}else e=b.lng(),a=a.lng();return _.wc(c,e,d,a)},S2=function(){var a=0;return function(){return a++}},W2=function(){var a=this.f=T2(this);this.da=U2(this);var b="url("+_.Ql+"crosshair.cur)";_.V.j&&(b+=" 7 7");b+=", crosshair";var c=S2();this.m=6+(_.ql()?9:0);this.j={circle:new C2(new G2,b,c),marker:new H2(b),polygon:new J2(!0,b,c,this.m),polyline:new J2(!1,b,c,this.m),rectangle:new C2(new Q2,
b,c)};b=V2(this);for(var d in this.j)c=this.j[d],c.bindTo("map",this),c.bindTo("panWhileDrawing",this),c.bindTo("draggingCursor",a),c.bindTo("draggableCursor",b),c.bindTo("enablePanning",a,"panAtEdge"),c.bindTo("options",this,d+"Options"),_.M.forward(c,"overlaycomplete",this),_.M.forward(c,d+"complete",this);this.j.polygon.bindTo("drawPolysWithDrag",this);this.j.polyline.bindTo("drawPolysWithDrag",this);this.b=null;this.ma=[];this.l=this.A=null;this.G=0;this.Z=this.D=null;this.B=this.H=void 0},T2=
function(a){var b="click dblclick movestart move moveend panbynow mousewheel mousemove".split(" "),c=new _.OH(b),d=!1;_.D(b,function(b){_.M.addListener(c,b,function(c,e){var f=c instanceof _.Jm,g=f?c.fa:c;if("click"==b||"dblclick"==b||"mousemove"==b)f?("click"==b&&_.Nm(c),"dblclick"==b&&_.Nm(c),"mousemove"==b&&_.Lm(c)):_.Gc(c);if("mousewheel"!=b&&(!d||"mousemove"!=b)){if("mousemove"==b||"move"==b)a.D=b,a.Z=g,a.H=e;if(d||!a.get("panWhileDrawing"))"movestart"==b&&(d=!0),"moveend"==b&&(d=!1),c=_.Rj(),
"panbynow"==b?a.D&&X2(a,a.D,a.Z,c,a.H):X2(a,b,g,c,e)}})});return c},U2=function(a){var b=new _.Sw(["map","drawingMode","pegmanDragging"],"active",function(a,b,e){return!!a&&!!b&&!e});b.bindTo("map",a);b.bindTo("drawingMode",a);a.f.bindTo("active",b);return b},V2=function(a){var b=new _.Sw(["draggableCursor","panWhileDrawing"],"cursor",function(a,b){return b?null:a});b.bindTo("panWhileDrawing",a);a.f.bindTo("draggableCursor",b,"cursor");return b},X2=function(a,b,c,d,e){var f=a.get("map");if(a.b){var g=
f.__gm.get("projectionController"),h=f.__gm.get("panes");if(g&&h&&(e=e||c,a.B&&e)){g=a.B.Jb(e);f=_.$l(g,f.getProjection());e=new _.H(e.clientX,e.clientY);(g=(g=a.get("snappingCallback"))&&g(a.b.Xf(f)))&&(f=g);g=!1;if("click"==b){if(300>=d-a.G&&a.l&&_.Cb(a.l.x,e.x,a.m)&&_.Cb(a.l.y,e.y,a.m))return;a.l=e;a.G=d;g=a.b.pe(f)}else"dblclick"==b?g=a.b.Lh():"mousemove"==b?g=a.b.Gf(f):"movestart"==b?g=a.b.Jf(f):"move"==b?g=a.b.Hf(f):"moveend"==b&&(g=a.b.If(f));g&&c&&_.Gc(c)}}},Y2=function(a){_.Df.call(this);
var b=new W2;b.bindTo("map",a);b.bindTo("drawingMode",a);b.bindTo("panWhileDrawing",a);b.bindTo("markerOptions",a);b.bindTo("polygonOptions",a);b.bindTo("polylineOptions",a);b.bindTo("rectangleOptions",a);b.bindTo("circleOptions",a);b.bindTo("drawPolysWithDrag",a);_.M.forward(b,"overlaycomplete",a);_.M.forward(b,"circlecomplete",a);_.M.forward(b,"markercomplete",a);_.M.forward(b,"polygoncomplete",a);_.M.forward(b,"polylinecomplete",a);_.M.forward(b,"rectanglecomplete",a);this.bindTo("map",a);this.bindTo("drawingControl",
a);this.bindTo("drawingControlOptions",a);this.bindTo("drawingMode",a);this.set("snappingCallback",a.get("snappingCallback"));a.bindTo("snappingCallback",this);b.bindTo("snappingCallback",this)},Z2=function(a){switch(a){case null:return null;case "Point":return"marker";case "LineString":return"polyline";case "Polygon":return"polygon";default:return null}};_.A(A2,_.N);
var z2={marker:"\u52a0\u5165\u6a19\u8a18",polygon:"\u7e6a\u88fd\u4e00\u500b\u5f62\u72c0",polyline:"\u756b\u4e00\u689d\u7dda",rectangle:"\u756b\u4e00\u500b\u77e9\u5f62",circle:"\u756b\u4e00\u500b\u5713"},x2=new _.I(16,16),y2={hand:144,marker:112,polygon:96,polyline:128,rectangle:48,circle:0},w2={hand:80,marker:176,polygon:64,polyline:32,rectangle:16,circle:160};_.A(B2,_.N);_.m=B2.prototype;_.m.pe=_.qa(!1);_.m.Lh=_.qa(!1);_.m.Gf=_.qa(!1);_.m.Jf=_.qa(!1);_.m.Hf=_.qa(!1);_.m.If=_.qa(!1);_.A(C2,B2);_.m=C2.prototype;_.m.Xf=function(a){D2(this);E2(this,a);return{latLng:a,overlay:this.b}};_.m.active_changed=function(){if(this.get("active"))this.set("draggableCursor",this.m),this.set("draggingCursor","");else{var a=this.b;a&&(a.unbind("map"),a.set("map",null),this.b=null);this.f=null;this.j=!1}};_.m.pe=function(a){this.f?F2(this,a):(D2(this),this.f=a,E2(this,a),this.j=!0);return!1};_.m.Gf=function(a){E2(this,a);return!1};
_.m.Jf=function(a){if(this.j)return!1;this.set("draggingCursor",this.m);this.set("enablePanning",!0);D2(this);this.f=a;E2(this,a);return!0};_.m.Hf=function(a){if(this.j)return!1;E2(this,a);return!0};_.m.If=function(a){if(this.j)return!1;this.set("draggingCursor","");this.set("enablePanning",!1);F2(this,a);return!0};G2.prototype.f=function(a){return new _.qg(a)};G2.prototype.b=function(a,b,c){a.set("center",b);var d=0,e=a.get("map");e&&c&&(d=e.__gm.get("baseMapType"),d=_.Yu(b,c,d&&d.radius));a.set("radius",d)};G2.prototype.l=_.qa("circle");G2.prototype.j=_.qa("circlecomplete");_.A(H2,B2);H2.prototype.Xf=function(a){I2(this);this.b.setPosition(a);return{latLng:a,overlay:this.b}};H2.prototype.active_changed=function(){this.get("active")&&this.set("draggableCursor",this.f)};H2.prototype.pe=function(a){I2(this);this.b.setPosition(a);this.b.setMap(this.get("map"));_.M.trigger(this,"overlaycomplete",{type:"marker",overlay:this.b});_.M.trigger(this,"markercomplete",this.b);this.b=null;return!1};_.A(J2,B2);_.m=J2.prototype;_.m.Xf=function(a){this.b&&this.b.gc||P2(this);return{latLng:a,overlay:this.b.di||this.b.gc}};_.m.active_changed=function(){this.get("active")?this.set("draggableCursor",this.f):this.b&&this.b.gc&&M2(this)};_.m.pe=function(a){if(!a)return!1;this.b?N2(this,a):(P2(this),K2(this,a));return!1};_.m.Lh=function(){this.b&&1<this.b.gc.getPath().getLength()&&M2(this);return!1};
_.m.Gf=function(a){var b=a;this.b&&(a=L2(this,a),this.set("draggableCursor",a?"pointer":this.f),a&&(b=a.latLng),this.b.Rb.set("freeVertexPosition",b));return!1};_.m.Jf=function(a){return a?this.get("drawPolysWithDrag")?(this.b||P2(this),this.b.gc.getPath().getLength()||K2(this,a),this.set("draggingCursor",this.f),!0):!1:!1};_.m.Hf=function(a){return this.b&&this.get("drawPolysWithDrag")?(this.b.Rb.set("freeVertexPosition",a),!0):!1};
_.m.If=function(a){return a?this.get("drawPolysWithDrag")?(this.b&&(N2(this,a),this.set("draggingCursor","")),this.b&&this.b.Rb.set("freeVertexPosition",null),!0):!1:!1};_.m.drawPolysWithDrag_changed=J2.prototype.panWhileDrawing_changed=function(){O2(this)};Q2.prototype.f=function(a){return new _.ug(a)};Q2.prototype.b=function(a,b,c){a.set("bounds",R2(b,c||b))};Q2.prototype.l=_.qa("rectangle");Q2.prototype.j=_.qa("rectanglecomplete");_.A(W2,_.N);W2.prototype.map_changed=function(){var a=this,b=this.get("map"),c=this.da,d=this.f;if(b){var e=b.__gm;e.b.then(function(b){a.B=b.xa});this.bindTo("mouseEventTarget",e);c.bindTo("pegmanDragging",e);d.bindTo("draggable",b);d.bindTo("scrollwheel",b);this.A=_.M.forward(d,"panbynow",e)}else this.unbind("mouseEventTarget"),this.set("mouseEventTarget",null),c.unbind("pegmanDragging"),d.unbind("draggable"),d.unbind("scrollwheel"),this.A&&(_.M.removeListener(this.A),this.A=null)};
W2.prototype.mouseEventTarget_changed=function(){var a=["panes","pixelBounds"],b=this.f;_.D(a,b.unbind,b);b=this.ma;_.D(b,_.M.removeListener);b.length=0;if(this.get("mouseEventTarget")){b=this.f;var c=this.get("map");_.zv(b,a,c.__gm)}};W2.prototype.drawingMode_changed=function(){this.b&&this.b.set("active",!1);this.f.set("panAtEdge",!1);var a=this.get("drawingMode");(this.b=this.j[a])&&this.b.set("active",!0)};_.A(Y2,_.Df);_.m=Y2.prototype;_.m.map_changed=function(){var a=this.get("map");a?(a=a.__gm,this.bindTo("layoutManager",a),a.set("snappingCallback",this.get("snappingCallback")),this.bindTo("snappingCallback",a)):(this.unbind("layoutManager"),this.set("layoutManager",null),this.unbind("snappingCallback"))};_.m.layoutManager_changed=Y2.prototype.S;_.m.drawingControl_changed=Y2.prototype.S;_.m.drawingControlOptions_changed=Y2.prototype.S;
_.m.pa=function(){this.b&&(this.f.Vb(this.b),_.$f(this.b),this.b=null,this.j.unbindAll(),this.j=null);if((this.f=this.get("layoutManager"))&&0!=this.get("drawingControl")){var a=this.get("drawingControlOptions")||{},b=a.drawingModes||$2,c=window.document.createElement("div");_.uw(c);c.style.margin=_.U(5);_.El(c,10);this.b=c;this.j=new A2(this.b,b);this.j.bindTo("drawingMode",this);this.f.addElement(this.b,a.position||1,!1,.25)}};var $2=["marker","polyline","rectangle","circle","polygon"];_.ce("drawing_impl",{kj:Y2,il:function(a){var b=new _.N,c=new _.Sw(["dataDrawingMode"],"drawingManagerMode",Z2);c.bindTo("dataDrawingMode",a,"drawingMode");var d=new _.Sw(["styleOrStylingFunction"],"style",function(a){return"function"===typeof a?a(new _.ee):a});d.bindTo("styleOrStylingFunction",a,"style");var e=new _.Sw(["controls","controlPosition"],"drawingControlOptions",function(a,b){return{drawingModes:_.Db(a,Z2),position:b}});e.bindTo("controls",a);e.bindTo("controlPosition",a);var f=new _.Sw(["controls"],
"drawingControl",function(a){return!!a});f.bindTo("controls",a);b.bindTo("map",a);b.bindTo("drawingMode",c,"drawingManagerMode");b.bindTo("markerOptions",d,"style");b.bindTo("polylineOptions",d,"style");b.bindTo("polygonOptions",d,"style");b.bindTo("drawingControlOptions",e);b.bindTo("drawingControl",f);_.M.addListener(b,"overlaycomplete",function(b){b=b.overlay;var c=_.MH([b]),d=a.get("featureFactory");c=d?d(c):new _.ee({geometry:c});a.add(c);b.set("map",null)});new Y2(b);_.Vj(a,"map_changed",function(){var b=
a.get("map");b&&_.X(b,"Le")})}});});
